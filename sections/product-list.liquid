{% capture carousel_children %}

{% for product in section.settings.collection.products %}
  {% capture carousel_item_children %}
        {% # theme-check-disable %}
        {% content_for 'block', type: 'product-card', id: 'product-card', closest.product: product %}
        {% # theme-check-enable %}
    {% endcapture %}
    {% # theme-check-disable %}
    {% content_for 'block', type: 'carousel-item', id: 'product-card-item', children: carousel_item_children %}
    {% # theme-check-enable %}
{% endfor %}
{% endcapture %}
<div class='product-list'>
  {{ carousel_children }}
</div>

{% schema %}
  {
    "name": "Product list",
    "class": "product-list-wrapper",
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection",
        "info": "Select collection to display"
      }
    ],
    "presets": [
      {
        "name": "Product List"
      }
    ]
  }
{% endschema %}
