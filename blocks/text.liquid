{% doc %}
  Renders a text block.

  @param {string} [text]

  {% content_for 'block', type: 'text', id: 'text' %}
{% enddoc %}

{%- capture vars -%}
--text-background: {{ block.settings.color_scheme.settings.background }};
--text-color: {{ block.settings.color_scheme.settings.foreground }};
--text-align: {{ block.settings.alignment }};
--text-align-mobile: {{ block.settings.alignment_mobile }};
{%- if block.settings.text_style == 'custom' -%}--text-size: {{ block.settings.font_size }}px;{%- endif -%}
{%- if block.settings.text_style_mobile == 'custom' -%}--text-size-mobile: {{ block.settings.font_size_mobile }}px;{%- endif -%}
{%- render 'padding-vars', settings: block.settings -%}
{%- endcapture -%}

<div
  class='text padding {{ block.settings.text_style }} {{ block.settings.text_style_mobile }}'
  {{ block.shopify_attributes }}
  style='{{ vars }}'>
  {{ block.settings.text | default: text }}
</div>

{% schema %}
  {
    "name": "t:general.text",
    "settings": [
      {
        "type": "select",
        "id": "device",
        "label": "Type",
        "default": "common",
        "options": [
          {
            "value": "common",
            "label": "Common"
          },
          {
            "value": "desktop",
            "label": "Desk"
          },
          {
            "value": "mobile",
            "label": "Mob"
          }
        ]
      },
      {
        "type": "text",
        "id": "text",
        "label": "t:labels.text"
      },
      {
        "type": "select",
        "id": "text_style",
        "label": "t:labels.text_style",
        "options": [
          { "value": "text--title", "label": "t:options.text_style.title" },
          { "value": "text--subtitle", "label": "t:options.text_style.subtitle" },
          { "value": "text--normal", "label": "t:options.text_style.normal" },
          { "value": "custom", "label": "Custom" }
        ],
        "default": "text--title",
        "visible_if": "{{ block.settings.device == 'desktop' }}"
      },
      {
        "type": "select",
        "id": "text_style_mobile",
        "label": "t:labels.text_style",
        "options": [
          { "value": "text--title__mobile", "label": "t:options.text_style.title" },
          { "value": "text--subtitle__mobile", "label": "t:options.text_style.subtitle" },
          { "value": "text--normal__mobile", "label": "t:options.text_style.normal" },
          { "value": "custom", "label": "Custom" }
        ],
        "default": "text--title__mobile",
        "visible_if": "{{ block.settings.device == 'mobile' }}"
      },
      {
        "type": "range",
        "id": "font_size",
        "min": 6,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Size",
        "default": 16,
        "visible_if": "{{ block.settings.text_style == 'custom' and block.settings.device == 'desktop' }}"
      },
      {
        "type": "range",
        "id": "font_size_mobile",
        "min": 6,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Size",
        "default": 16,
        "visible_if": "{{ block.settings.text_style == 'custom' and block.settings.device == 'mobile' }}"
      },
      {
        "type": "text_alignment",
        "id": "alignment",
        "label": "t:labels.alignment",
        "default": "left",
        "visible_if": "{{ block.settings.device == 'desktop' }}"
      },
      {
        "type": "text_alignment",
        "id": "alignment_mobile",
        "label": "t:labels.alignment",
        "default": "left",
        "visible_if": "{{ block.settings.device == 'mobile' }}"
      },
      {
        "type": "color_scheme",
        "id": "color_scheme",
        "default": "scheme_1",
        "label": "Color scheme"
      },
      {
        "type": "range",
        "id": "padding_top",
        "visible_if": "{{ block.settings.device == 'desktop' }}",
        "label": "Padding Top",
        "default": 0,
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px"
      },
      {
        "type": "range",
        "id": "padding_top_mobile",
        "label": "Padding Top",
        "visible_if": "{{ block.settings.device == 'mobile' }}",
        "default": 0,
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px"
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "visible_if": "{{ block.settings.device == 'desktop' }}",
        "label": "Padding Bottom",
        "default": 0,
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px"
      },
      {
        "type": "range",
        "id": "padding_bottom_mobile",
        "label": "Padding Bottom",
        "visible_if": "{{ block.settings.device == 'mobile' }}",
        "default": 0,
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px"
      }
    ],
    "presets": [{ "name": "t:general.text" }]
  }
{% endschema %}
